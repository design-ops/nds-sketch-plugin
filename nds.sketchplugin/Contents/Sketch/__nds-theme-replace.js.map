{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/lib/context.js","webpack://exports/./src/lib/identifier.js","webpack://exports/./src/lib/identifierMatcher.js","webpack://exports/./src/lib/layers.js","webpack://exports/./src/lib/library.js","webpack://exports/./src/lib/nested.js","webpack://exports/./src/nds-theme-replace.js","webpack://exports/external \"sketch\""],"names":["VariableSizeContext","str","_arr","_arrayFromString","split","map","entry","charAt","substr","join","toString","arr","length","append","getIdentifiersIn","layer","lookup","res","forEach","sublayer","context","getContextFromName","e","nested","getNestedContexts","concat","layers","undefined","newContext","type","pop","hidden","locked","overrides","symbolName","name","getContextsFromOverrides","splice","thisToken","symbolId","getSymbolFromDocument","slice","push","sharedStyle","baseContext","nestedContexts","override","id","value","sharedSymbol","property","updateNestedContextsFromOverride","affectedLayer","master","symbolContext","contextFromNestedContexts","result","styleName","styleContext","appendLast","existing","matchScore","lhs","rhs","getPathAndToken","lhsPath","lhsToken","rhsPath","rhsToken","Number","MAX_SAFE_INTEGER","rhsIterator","Symbol","iterator","rhsComponent","next","score","nextScore","lhsComponent","getComponentWithoutVariant","lhsVariant","getVariant","rhsVariant","from","elements","token","reverse","component","matches","match","includes","module","exports","getSelectedLayers","document","selectedLayers","selectedLayersAreArtboard","selectedPage","getAllLibraries","options","libraries","Library","getLibraries","lib","getLibraryByName","selectedLibrary","thisDocument","Document","getSelectedDocument","getSymbols","thisSymbol","find","el","substring","swapTokens","newToken","imported","sharedStyleId","style","syncWithSharedStyle","resizeWithSmartLayout","findTokenMatch","lookupAgainst","styleValue","currentScore","getScore","resizeTokens","console","log","createTextLayerSymbolLookup","library","textStyles","getImportableTextStyleReferencesForDocument","text","layerStyles","getImportableLayerStyleReferencesForDocument","symbols","getImportableSymbolReferencesForDocument","symbol","NestedContext","level","info","manageNesting","nestedcontext","target","i","item","levels","path","contextName","ncontext","nc","onRun","showSelectLibrary","ReferenceError","message","fileName","lineNumber","stack","libs","libNames","enabled","libraryType","lastModified","lastModifiedAt","UI","getInputFromUser","description","INPUT_TYPE","selection","possibleValues","err","found","getIdentifiers","libraryLookupId","libraryName","targetLayer","getArtboards","filter","tgt","tokenCount","tokenMissingCount","tokenMissingNames","tokens","symbolTokens","tk","styleTokens","notFound"],"mappings":"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","file":"__nds-theme-replace.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/nds-theme-replace.js\");\n","\nexport class VariableSizeContext {\n    constructor(str) {\n        this._arr = this._arrayFromString(str)\n    }\n    _arrayFromString(str) {\n        return str.split(\"/\").map( entry => {\n            if (entry.charAt(0) == \"_\") return entry.substr(1)\n            return entry\n        })\n    }\n    toString() {\n        return this._arr.join(\"/\")\n    }\n    append(str) {\n        return new VariableSizeContext(this.toString()+\"/\"+str)\n    }\n    appendLast(str) {\n        const arr = this._arrayFromString(str)\n        if (arr.length > 0) {\n          return this.append(arr[arr.length-1])\n        } else {\n          return this\n        }\n    }\n}\n","import { updateNestedContextsFromOverride, contextFromNestedContexts } from './nested'\nimport { VariableSizeContext } from './context'\nimport { getSymbolFromDocument } from './library'\n\nexport const getIdentifiersIn = (layer, lookup) => {\n    let res = []\n    layer.forEach( sublayer => {\n        let context = getContextFromName(null, sublayer)\n\n        // Get Artboard Section name only\n        context._arr = context._arr.map((e) => e.split(\" - \")[0])\n\n        let nested = getNestedContexts(sublayer, context, lookup)\n        res = res.concat( nested )\n    })\n    return res\n}\n\nconst getNestedContexts = (layer, context, lookup) => {\n\n    let res = []\n    if (layer.layers == undefined) return\n    layer.layers.forEach( sublayer => {\n\n        let newContext = getContextFromName(context, sublayer)\n\n        if (sublayer.type == \"Group\") { // If it's a group, re-run with the new context\n\n            // Ignore the Group name from the context\n            // eg. 'artboard-name/Group' > 'artboard-name'\n            newContext._arr.pop()\n\n            let nested = getNestedContexts(sublayer, newContext, lookup)\n            res = res.concat( nested )\n\n        } else if (sublayer.type == \"SymbolInstance\" && sublayer.hidden == false && sublayer.locked == false) { // If it's a Symbol, igonre hidden or locked layers\n\n            if (sublayer.overrides.length > 0){ // If the Symbol has Overrides\n\n\n\n                // Check to see if this is a component or not.\n                // If it is not a compoennt, we need to match this as well.\n                // Then we need to get it's overrides\n                let symbolName = `${sublayer.name}`\n                if (symbolName.charAt(0) == \"_\") { // If it's a component\n\n                  // If it's a component, we need to see if we\n                  // can get a match from the components library\n                  // Probably not going to happen, ever\n\n                  let nested = getContextsFromOverrides(sublayer.overrides, newContext, lookup)\n                  res = res.concat( nested )\n\n                } else { // If it isn't a Component\n\n                  // Context of the layer\n                  // Since we're on an Artboard, and not inside a symbol, the context must be the artboard name.\n                  // eg. `artboard-name/symbol-name/layer-name` > 'artboard-name'\n                  newContext._arr.splice(1)\n\n                  // Get Token name\n                  // Get the actual shared style name\n                  // eg. 'symbol-name/token-name' > 'token-name'\n                  let thisToken\n                  if (lookup[sublayer.symbolId] == undefined) {\n                    // If symbol is not found in any Library\n                    // Go look for a reference in the current document\n                    thisToken = getSymbolFromDocument(sublayer.symbolId)\n\n                  } else {\n                    thisToken = lookup[sublayer.symbolId].name.split('/').slice(-1)\n                  }\n\n                  // Create the new Token\n                  newContext._arr.push(thisToken)\n\n                  res.push({context: newContext, layer: sublayer})\n\n                  // Now, go get the Overrides\n                  let nested = getContextsFromOverrides(sublayer.overrides, newContext, lookup)\n                  res = res.concat( nested )\n\n                }\n\n            } else {  // If the Symbol does NOT have Overrides\n\n                // Context of the layer\n                // Since we're on an Artboard, and not inside a symbol, the context must be the artboard name.\n                // eg. `artboard-name/symbol-name/layer-name` > 'artboard-name'\n                newContext._arr.splice(1)\n\n                // Get Token name\n                // Get the actual shared style name\n                // eg. 'symbol-name/token-name' > 'token-name'\n                let thisToken\n                if (lookup[sublayer.symbolId] == undefined) {\n                  // If symbol is not found in any Library\n                  // Go look for a reference in the current document\n                  thisToken = getSymbolFromDocument(sublayer.symbolId)\n\n                } else {\n                  thisToken = lookup[sublayer.symbolId].name.split('/').slice(-1)\n                }\n\n                // Create the new Token\n                newContext._arr.push(thisToken)\n\n                res.push({context: newContext, layer: sublayer})\n            }\n\n        } else if ((sublayer.type == 'Text' || sublayer.type == 'ShapePath') && sublayer.hidden == false && sublayer.locked == false) { // If it's a Layer or Text style, igonre hidden or locked layers\n          // console.log(sublayer)\n\n            // only add layers that have shared styles\n            if (sublayer.sharedStyle != null) {\n\n              // Context of the layer\n              // Remove the layer name because we only need the context.\n              // eg. `artboard-name/symbol-name/layer-name` > 'artboard-name/symbol-name'\n              newContext._arr.pop()\n\n              // Get Token name\n              // Get the actual shared style name\n              // eg. 'artboard-name/symbol-name/token-name' > 'token-name'\n              let thisToken\n              thisToken = sublayer.sharedStyle.name.split('/').slice(-1)\n\n              // Create the new Token\n              newContext._arr.push(thisToken)\n\n              res.push({context: newContext, layer: sublayer})\n            }\n\n        }\n\n    })\n    return res\n}\n\nconst getContextsFromOverrides = (overrides, context, lookup) => {\n\n    let baseContext = context;\n    let nestedContexts = []\n    let res = []\n\n\n    overrides.forEach( override => {\n\n        let id = override.value\n        let sharedSymbol = lookup[id]\n\n        if (override.property == \"symbolID\" && id != '') {\n\n          nestedContexts = updateNestedContextsFromOverride(nestedContexts, override, lookup)\n\n          if (override.affectedLayer && override.affectedLayer.master){\n\n              let symbolName = `${override.affectedLayer.master.name}`\n\n              // Only operate if it's not got an '_' at the start\n              // note: anything with an '_' is considered a component\n              if (symbolName.charAt(0) != \"_\") {\n\n                let symbolContext = contextFromNestedContexts(baseContext, nestedContexts)\n                let result = { context: symbolContext, layer: override }\n                res.push(result)\n\n              }\n          }\n\n        } else if (override.property == \"textStyle\" || override.property == \"layerStyle\") {\n\n          nestedContexts = updateNestedContextsFromOverride(nestedContexts, override, lookup)\n\n          if (override.affectedLayer && override.affectedLayer.name){\n\n            let styleName = `${override.affectedLayer.name}`\n\n            let styleContext = contextFromNestedContexts(baseContext, nestedContexts).appendLast(styleName)\n            let result = { context: styleContext, layer: override }\n            res.push(result)\n\n          }\n        }\n\n    })\n    return res\n}\n\nconst getContextFromName = (existing, layer) => {\n    let name = layer.name\n    if (layer.master) name = layer.master.name\n    if (existing == null) {\n        return new VariableSizeContext(name)\n    }\n    return existing.append(name)\n}\n","//lhs => specific\n//rhs => general\nconst matchScore = (lhs, rhs) => {\n    const [lhsPath, lhsToken] = getPathAndToken(lhs)\n    const [rhsPath, rhsToken] = getPathAndToken(rhs)\n\n    if (lhsToken !== rhsToken) {\n        return 0;\n    }\n\n    if (rhsPath.length === 0) {\n        return 1;\n    }\n\n    if (lhsPath.length === 0) {\n        return 0;\n    }\n\n    if (lhs === rhs) {\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    const rhsIterator = rhsPath[Symbol.iterator]();\n    let rhsComponent = rhsIterator.next().value\n\n    let score = 0;\n     // The score value of the current component - this goes down each time i.e. starts at the maximum and works its way down\n    let nextScore = 1 << (lhsPath.length * 2)\n\n    for (const lhsComponent of lhsPath) {\n        // If the lhs doesn't match the rhs component, move on to the next one\n        if (getComponentWithoutVariant(lhsComponent) !== getComponentWithoutVariant(rhsComponent)) {\n            nextScore /= 4;\n            continue;\n        }\n\n        score += nextScore/2\n\n        // Check for variants\n        const lhsVariant = getVariant(lhsComponent);\n        const rhsVariant = getVariant(rhsComponent);\n\n        if (lhsVariant == null && rhsVariant == null) {\n            // Do nothing variants not present\n        } else if (lhsVariant != null && rhsVariant == null) {\n            // To nothing, specific has variant, general doesn't care\n        } else if (lhsVariant != null && rhsVariant != null && lhsVariant === rhsVariant) {\n            score += nextScore\n        } else {\n            // If there are variants which don't match, this is a hard fail\n            return 0\n        }\n\n        // Move on to the next rhs component - and if we are at the end, we have matched and just return the score\n        rhsComponent = rhsIterator.next().value\n        if (rhsComponent == null) {\n            return score\n        }\n\n        // Each component in the lhs which matches is more important than the last one.\n        // Increase it's score to take that into account\n        nextScore /= 4;\n    }\n    return 0;\n}\n\nconst getPathAndToken = (from) => {\n    const elements = from.split(\"/\")\n    const token = elements.pop()\n    return [elements.reverse(), token]\n}\n\nconst getVariant = (component) => {\n    const matches = component.match(/\\[.+\\]/g);\n    if (matches && matches.length) {\n        return matches[0]\n    }\n    return null\n}\n\nconst getComponentWithoutVariant = (component) => {\n    if (component.includes(\"[\")) {\n        return component.split(\"[\")[0]\n    }\n    return component\n}\n\nmodule.exports = {matchScore}\n","\nexport const getSelectedLayers = (document) => {\n    let selectedLayers\n    if (document.selectedLayers && document.selectedLayers.length !== 0 && selectedLayersAreArtboard(document.selectedLayers)) {\n        selectedLayers = document.selectedLayers;\n    } else {\n        selectedLayers = document.selectedPage;\n    }\n    return selectedLayers\n}\n\nconst selectedLayersAreArtboard = (selectedLayers) => {\n    if (selectedLayers.layers.length > 0 && selectedLayers.layers[0].layers != undefined){\n        return true\n    }\n    return false\n}\n","import { Library, Document } from \"sketch\";\nimport { matchScore } from './identifierMatcher'\n\nexport const getAllLibraries = () => {\n    //  array that will be populated with available libaries to import\n    let options = [];\n    // Check to see if Library is enabled\n    var libraries = Library.getLibraries();\n\n    libraries.forEach(lib => {\n        // @TODO filter out inactive libraries\n        options.push(lib.name);\n    });\n\n    return options\n}\n\nexport const getLibraryByName = (name) => {\n    var selectedLibrary = null;\n    var libraries = Library.getLibraries();\n    libraries.forEach(lib => {\n        if (lib.name.includes(name)) {\n            selectedLibrary = lib;\n        }\n    })\n    return selectedLibrary\n}\n\nexport const getSymbolFromDocument = (id) => {\n  let thisDocument = Document.getSelectedDocument()\n  let getSymbols = thisDocument.getSymbols()\n  let thisSymbol = getSymbols.find(el => el.symbolId == id)\n  let thisToken\n  if (thisSymbol.name.charAt(0) == \"_\") {\n    thisToken = thisSymbol.name.substring(1).split('/').slice(-1)\n  } else {\n    thisToken = thisSymbol.name.split('/').slice(-1)\n  }\n  return thisToken\n}\n\nexport const swapTokens = (token, newToken) => {\n\n  const imported = newToken.import()\n\n  if (token.layer.type == \"Override\" && token.layer.property == \"layerStyle\") {\n    token.layer.value = imported.id\n  }\n\n  if (token.layer.type == \"Override\" && token.layer.property == \"textStyle\") {\n    token.layer.value = imported.id\n  }\n\n  if (token.layer.type == \"Override\" && token.layer.property == \"symbolID\") {\n    token.layer.value = imported.symbolId\n  }\n\n  if (token.layer.type == \"ShapePath\") {\n    token.layer.sharedStyleId = imported.id\n    token.layer.name = imported.name\n    token.layer.style.syncWithSharedStyle(imported)\n  }\n  if (token.layer.type == \"Text\") {\n    token.layer.sharedStyleId = imported.id\n    token.layer.name = imported.name\n    token.layer.style.syncWithSharedStyle(imported)\n  }\n\n  if (token.layer.type == \"SymbolInstance\") {\n    token.layer.symbolId = imported.symbolId\n    token.layer.name = imported.name\n    token.layer.resizeWithSmartLayout()\n  }\n\n}\n\nexport const findTokenMatch = (token, lookupAgainst) => {\n\n  let styleValue\n  let currentScore = 0\n  let newToken = {}\n  for(var styleName in lookupAgainst) {\n    styleValue = lookupAgainst[styleName]\n    const getScore = matchScore(token.context.toString(), styleValue.name)\n    if (getScore > currentScore) { // Only look for the highest scoring result\n      currentScore = getScore\n      newToken = styleValue\n    }\n  }\n\n  return newToken\n\n}\n\nexport const resizeTokens = (token) => {\n  console.log(`Resize: ${token.layer.name}`)\n  if (token.layer.type == \"SymbolInstance\") {\n    token.resizeWithSmartLayout()\n  }\n}\n\n// an method that gets all the references (symbols, text styles, layer styles)\n// from every library and put them in one object.\nexport const createTextLayerSymbolLookup = (libraries, document) => {\n    let lookup = {}\n    libraries.forEach(library => {\n        var textStyles = library.getImportableTextStyleReferencesForDocument(document)\n        textStyles.forEach(text => {\n            lookup[text.id] = text;\n        })\n\n        var layerStyles = library.getImportableLayerStyleReferencesForDocument(document)\n        layerStyles.forEach(layer => {\n            lookup[layer.id] = layer;\n        })\n\n        var symbols = library.getImportableSymbolReferencesForDocument(document)\n        symbols.forEach(symbol => {\n            lookup[symbol.id] = symbol;\n        })\n    })\n    return lookup;\n}\n","import { getSymbolFromDocument } from './library'\n\n// export is only for jest\n// @TODO switch to use rewire to expose this\nexport class NestedContext {\n    constructor(level, info) {\n        this.level = level\n        this.info = info\n    }\n}\n\n// export is only for jest\n// @TODO switch to use rewire to expose this\nexport const manageNesting = (arr, nestedcontext) => {\n    // if the level is higher then add it\n    // if the level is the same as an existing then replace\n    // if the level is lower then remove until the arr\n\n    // AKA remove any that are below or on same level\n    const target = nestedcontext.level\n    for(var i = arr.length-1; i >= 0; i-- ) {\n        const item = arr[i]\n        if (item.level >= target) {\n            arr.splice(i,1)\n        }\n    }\n    arr.push(nestedcontext)\n    return arr\n}\n\nexport const updateNestedContextsFromOverride = (nestedContexts, override, lookup) => {\n    let levels = override.path.split(\"/\").length\n    let contextName = ''\n    if (override.affectedLayer && override.affectedLayer.master){\n\n        // 1. We lookup the current value of the Override\n        // 2. If there is a value, we need to find it's name\n        // 3. We do a 'Split' because we only need the token name\n\n        // console.log(lookup[override.value])\n\n        if (lookup[override.value] != undefined) {\n          contextName = lookup[override.value].name.split('/').slice(-1)\n        } else {\n\n          // console.log('[Style Not found]')\n\n          // If symbol is not found in any Library\n          // Go look for a reference in the current document\n          if (override.value == '') {\n            contextName = getSymbolFromDocument(override.affectedLayer.symbolId)\n          } else {\n            contextName = getSymbolFromDocument(override.value)\n          }\n        }\n\n    }\n    // const context = new Context(contextName)\n    // if (context.type == ContextType.INVALID) return nestedContexts\n    let ncontext = new NestedContext(levels, contextName)\n    return manageNesting(nestedContexts, ncontext)\n}\n\nexport const contextFromNestedContexts = (baseContext, nestedContexts) => {\n    let context = baseContext\n    nestedContexts.forEach( nc => {\n        if (nc.info != \"\") context = context.append(nc.info)\n    })\n    return context\n}\n","import { Document, Library, UI } from \"sketch\";\nimport { createTextLayerSymbolLookup, swapTokens, findTokenMatch } from \"./lib/library\"\nimport { getIdentifiersIn } from './lib/identifier'\nimport { getSelectedLayers } from './lib/layers'\n\nexport default function onRun() {\n  console.log(\"------------------------------\")\n  console.log(\"[Initialise Plugin]\")\n  try {\n    showSelectLibrary()\n  } catch (e){\n    if (e instanceof ReferenceError) {\n      console.log(`exception thrown: ${e.message} in ${e.fileName} on ${e.lineNumber}`)\n      console.log(e.stack.split(\"\\n\")) // formats it better as an array :-/\n    } else {\n      console.log(`exception thrown: ${e}`);\n    }\n  }\n}\n\nconst showSelectLibrary = () => {\n\n  console.log(\"[Get Enabled Libraries]\")\n  let libs = Library.getLibraries()\n  let libNames = []\n\n  libs.forEach( lib => {\n    if (lib.enabled){\n      libNames.push({name: lib.name, id: lib.id, type: lib.libraryType, lastModified: lib.lastModifiedAt})\n    }\n  })\n\n  console.log(\"[Show Select Library Window]\")\n\n  // If we use a custom UI, we can remove the trailing characters from the ID.\n  UI.getInputFromUser(\n    \"NDS Theme Replacer\",\n    {\n      description: \"Swap out the current theme for a new one.\",\n      type: UI.INPUT_TYPE.selection,\n      possibleValues: libNames.map(el => el.name + \" (\" + el.id.slice(-6) + \")\"),\n    },\n    (err, value) => {\n      if (err) {\n        console.log(\"[Canceled]\")\n        return\n      } else {\n        const found = libNames.find(el => el.name + \" (\" + el.id.slice(-6) + \")\" == value)\n        console.log(`[Selected Library] - \"${found.name} (${found.id.slice(-6)})\"`)\n        getIdentifiers(found.id, found.name)\n      }\n    }\n  )\n\n}\n\nconst getIdentifiers = (libraryLookupId, libraryName) => {\n\n  const document = Document.getSelectedDocument()\n  const targetLayer = getSelectedLayers(document)\n  const getArtboards = targetLayer.layers.filter(tgt => tgt.type == \"Artboard\")\n  const lookup = createTextLayerSymbolLookup(Library.getLibraries(), document) // Create Lookup for all Libraries\n  const lookupAgainst = createTextLayerSymbolLookup(Library.getLibraries().filter(library => library.id == libraryLookupId), document) // Create Lookup for the Selected Library\n\n  var tokenCount = 0 // Reset Token count\n  var tokenMissingCount = 0 // Reset Missing Token count\n  var tokenMissingNames = []\n\n  console.log(\"[Get Identifiers]\")\n  const tokens = getIdentifiersIn(getArtboards, lookup)\n\n  console.log(\"[Items to replace]\")\n  let symbolTokens = tokens.filter(tk => tk.layer.type == \"SymbolInstance\" || (tk.layer.type == \"Override\" && tk.layer.property == \"symbolID\"))\n  let styleTokens = tokens.filter(tk => tk.layer.type == \"ShapePath\" || tk.layer.type == \"Text\" || (tk.layer.type == \"Override\" && tk.layer.property == \"layerStyle\") || (tk.layer.type == \"Override\" && tk.layer.property == \"textStyle\"))\n\n  styleTokens.forEach( token => {\n\n    let newToken\n    newToken = findTokenMatch(token, lookupAgainst)\n\n    //\n    // Token we want to replace\n    if (token.layer.type == \"Override\") {\n       console.log('\\x1b[37m', `  [${token.layer.type}: ${token.layer.affectedLayer.type}] [${token.context.toString()}]`) // token [object Object]\n    } else {\n       console.log('\\x1b[37m', `  [${token.layer.type}] [${token.context.toString()}]`) // token [object Object]\n    }\n    // Token we found that matches\n    if (newToken.name != undefined) {\n      console.log('\\x1b[37m', `   ∟ [${newToken.name}]`) // newToken [object Object]\n      swapTokens(token, newToken)\n      tokenCount++\n    } else {\n      console.log('\\x1b[31m', `   ∟ [Not Match Found!]`)\n      tokenMissingCount++\n      tokenMissingNames.push(token.context.toString())\n      // console.log(`   ∟ ${token.context.toString()}`)\n    }\n\n  })\n\n  symbolTokens.forEach( token => {\n\n    let newToken\n    newToken = findTokenMatch(token, lookupAgainst)\n\n    //\n    // Token we want to replace\n    if (token.layer.type == \"Override\") {\n       console.log('\\x1b[37m', `  [${token.layer.type}: ${token.layer.affectedLayer.type}] [${token.context.toString()}]`) // token [object Object]\n    } else {\n       console.log('\\x1b[37m', `  [${token.layer.type}] [${token.context.toString()}]`) // token [object Object]\n    }\n    // Token we found that matches\n    if (newToken.name != undefined) {\n      console.log('\\x1b[37m', `   ∟ [${newToken.name}]`) // newToken [object Object]\n      swapTokens(token, newToken)\n      tokenCount++\n    } else {\n      console.log('\\x1b[31m', `   ∟ [Not Match Found!]`)\n      tokenMissingCount++\n      tokenMissingNames.push(token.context.toString())\n      // console.log(`   ∟ ${token.context.toString()}`)\n    }\n\n  })\n\n  //\n  // Sketch UI Message\n  let notFound = ''\n  if (tokenCount>0) {\n    if (tokenMissingCount == 1) {\n      notFound = ` 🚨 ${tokenMissingCount} Token match not found!`\n    } else if (tokenMissingCount > 1) {\n      notFound = ` 🚨 ${tokenMissingCount} Token matches not found!`\n    }\n    UI.message(`✅ Found ${tokenCount} Tokens to swap from \"${libraryName}\"!${notFound}`)\n    console.log('\\x1b[37m', `\\n`, `✅ Found ${tokenCount} Tokens to swap from \"${libraryName}\"!${notFound}`)\n  } else {\n    UI.message(`😱 No Tokens found in \"${libraryName}\"!`)\n    console.log('\\x1b[37m', `\\n`, `😱 No Tokens found in \"${libraryName}\"!`)\n  }\n\n  // if (tokenMissingNames.length > 0) {\n  //   UI.alert('Done, but!', `I did not find these tokens: /n ${tokenMissingNames}`)\n  // }\n\n\n  // TODO:\n  // Consider adding extensive error message\n  // eg. If 'notFound', which Tokens where not found?\n\n\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}